<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Custom Map</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
</head>
<body>
<div id="map"></div>
<script>
const center_x=117.3,center_y=172.8,scale_x=0.02072,scale_y=0.0205
CUSTOM_CRS=L.extend({},L.CRS.Simple,{
projection:L.Projection.LonLat,
scale:z=>Math.pow(2,z),
zoom:sc=>Math.log(sc)/0.6931471805599453,
distance:(p1,p2)=>Math.sqrt((p2.lng-p1.lng)**2+(p2.lat-p1.lat)**2),
transformation:new L.Transformation(scale_x,center_x,-scale_y,center_y),
infinite:true
})
var zero_resmon_map=L.map('map',{
crs:CUSTOM_CRS,
minZoom:1,
maxZoom:4,
zoom:2,
maxNativeZoom:4,
preferCanvas:true
})
var tile=L.tileLayer('styleAtlas/{z}/{x}/{y}.jpg',{
tileSize:256,
minZoom:0,
maxZoom:4,
noWrap:true,
continuousWorld:false,
updateWhenIdle:true,
keepBuffer:1,
crossOrigin:true
}).addTo(zero_resmon_map)
zero_resmon_map.setView([0,0],2)
function customIcon(){return L.icon({iconUrl:'navi.png',iconSize:[40,40],iconAnchor:[10,10]})}
var group=L.layerGroup().addTo(zero_resmon_map)
var params=new URLSearchParams(window.location.search)
let coordsRaw=params.get('coords')||''
if(coordsRaw){
coordsRaw.split('|').forEach(c=>{
let [x,y,name]=c.split(',')
L.marker([parseFloat(y),parseFloat(x)],{icon:customIcon()})
.bindTooltip(name,{permanent:false,direction:'top'}).addTo(group)
})
}
</script>
<style>
html,body{margin:0;padding:0}
#map{
    width: 100%;
    height: 100vh;
    background: #0fa8d2;
}
.leaflet-control-zoom,.leaflet-control-attribution{display:none}
</style>
</body>
</html>
